!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};(function(){var c,d;c=window||b,c.thinkthroughmath||(c.thinkthroughmath={}),(d=c.thinkthroughmath).widgets||(d.widgets={}),a("./ui_elements"),a("./math_buttons"),a("./calculator")}).call(this)},{"./calculator":2,"./math_buttons":3,"./ui_elements":4}],2:[function(){(function(){var a,b,c,d,e,f,g,h,i,j,k,l;k=thinkthroughmath,e=k.class_mixer,g=k.lib.math.ExpressionToString,h=k.lib.historic_value,l=k.widgets.UIElements.build(),i=k.widgets.ButtonBuilder,f=k.lib.math.ExpressionComponentSource.build(),d="javascript-calculator",j=function(a){return a.empty()&&b.build_widget(a),a.dialog({dialogClass:"calculator-dialog",title:"Calculator"}),a.dialog("open"),a.dialog({position:{my:"right center",at:"right center",of:window}})},b=function(){function a(){}return a.build_widget=function(b,c){var d;return null==c&&(c=null),d=k.lib.math.math_lib.build(),a.build(b,d,k.logger,c)},a.prototype.initialize=function(a,b,d,e){return this.element=a,this.math=b,this.logger=d,this.buttonsToRender=e,this.view=c.build(this,this.element,this.math,this.buttonsToRender),this.expression_position=h.build(),this.updateCurrentExpressionWithCommand(this.math.commands.build_reset())},a.prototype.displayValue=function(){var a,b,c,d;return c=this.expression_position.current(),a=c.expression(),b=this.math.traversal.build(c).buildExpressionComponentContainsCursor(),a.isError()?this.errorMsg():(d=g.toHTMLString(c,b),0===d.length?"0":d)},a.prototype.display=function(){var a;return a=this.displayValue(),this.view.display(a)},a.prototype.errorMsg=function(){return"Error"},a.prototype.updateCurrentExpressionWithCommand=function(a){var b;return b=a.perform(this.expression_position.current()),this.reset_on_next_number=!1,this.expression_position.update(b),this.display(),this.expression_position.current()},a.prototype.numberClick=function(a){var b;return this.reset_on_next_number&&(this.reset_on_next_number=!1,this.updateCurrentExpressionWithCommand(this.math.commands.build_reset())),b=this.math.commands.build_append_number({value:a.value}),this.updateCurrentExpressionWithCommand(b)},a.prototype.exponentClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_exponentiate_last())},a.prototype.negativeClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_negate_last())},a.prototype.additionClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_addition())},a.prototype.multiplicationClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_multiplication())},a.prototype.divisionClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_division())},a.prototype.subtractionClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_subtraction())},a.prototype.decimalClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_decimal())},a.prototype.clearClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_reset())},a.prototype.equalsClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_calculate()),this.reset_on_next_number=!0},a.prototype.squareClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_square()),this.reset_on_next_number=!0},a.prototype.squareRootClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_square_root()),this.reset_on_next_number=!0},a.prototype.lparenClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_sub_expression())},a.prototype.rparenClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_exit_sub_expression())},a.prototype.piClick=function(){return this.updateCurrentExpressionWithCommand(this.math.commands.build_append_pi())},a}(),e(b),a=function(){function a(){}return a.prototype.initialize=function(a,b){this.components=a,this.buttonsToRender=null!=b?b:!1},a.prototype.render=function(a){var b;return this.element=a,b=["square","square_root","exponent","clear","pi","lparen","rparen","division","7","8","9","multiplication","4","5","6","subtraction","1","2","3","addition","0","decimal","negative","equals"],this.renderComponents(this.buttonsToRender||b)},a.prototype.render_component=function(a){return this.components[a].render({element:this.element})},a.prototype.renderComponents=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.render_component(b));return e},a}(),e(a),c=function(){function b(){}return b.prototype.initialize=function(b,c,d,e){var f,g,h,j,k,m=this;for(this.calc=b,this.element=c,this.math=d,this.buttonsToRender=e,g=i.build({element:this.element,ui_elements:l}),f={},j=g.base10Digits({click:function(a){return m.calc.numberClick(a)}}),h=k=0;9>=k;h=++k)f[""+h]=j[h];return f.negative=g.negative({click:function(){return m.calc.negativeClick()}}),f.decimal=g.decimal({click:function(){return m.calc.decimalClick()}}),f.addition=g.addition({click:function(){return m.calc.additionClick()}}),f.multiplication=g.multiplication({click:function(){return m.calc.multiplicationClick()}}),f.division=g.division({click:function(){return m.calc.divisionClick()}}),f.subtraction=g.subtraction({click:function(){return m.calc.subtractionClick()}}),f.equals=g.equals({click:function(){return m.calc.equalsClick()}}),f.clear=g.clear({click:function(){return m.calc.clearClick()}}),f.square=g.square({click:function(){return m.calc.squareClick()}}),f.square_root=g.root({click:function(){return m.calc.squareRootClick()}}),f.exponent=g.caret({click:function(){return m.calc.exponentClick()}}),f.lparen=g.lparen({click:function(){return m.calc.lparenClick()}}),f.rparen=g.rparen({click:function(){return m.calc.rparenClick()}}),f.pi=g.pi({click:function(){return m.calc.piClick()}}),this.layout=a.build(f,this.buttonsToRender),this.render()},b.prototype.display=function(a){var b;return b=this.element.find("figure.calculator-display"),b.html(a),b.scrollLeft(9999999)},b.prototype.render=function(){var a;return this.element.append("<div class='"+d+"'></div>"),a=this.element.find("div."+d),a.append("<figure class='calculator-display'>0</figure>"),this.layout.render(a)},b}(),e(c),b.openWidgetDialog=j,k.widgets.Calculator=b}).call(this)},{}],3:[function(){(function(){var a,b,c;c=thinkthroughmath,b=function(a){return"<span class='math-variable'>"+a+"</span>"},a=function(){function a(){}return a.prototype.initialize=function(a){return this.opts=null!=a?a:{},this.ui_elements=this.opts.ui_elements},a.prototype.base10Digits=function(a){var b,c,d,e=this;for(null==a&&(a={}),d=[],b=c=0;9>=c;b=++c)d.push(function(b){return e.button({value:""+b,"class":"math-button number-specifier number"},a)}(b));return d},a.prototype.caret=function(a){return this.button({value:"^",label:"&circ;","class":"math-button other caret"},a)},a.prototype.negative=function(a){return this.button({value:"negative",label:"(&ndash;)","class":"math-button number-specifier negative"},a)},a.prototype.negative_slash_positive=function(a){return this.button({value:"-/+",label:"&ndash;/+","class":"math-button number-specifier negative-slash-positive"},a)},a.prototype.decimal=function(a){return this.button({value:".","class":"math-button number-specifier decimal"},a)},a.prototype.addition=function(a){return this.button({value:"+","class":"math-button operation"},a)},a.prototype.multiplication=function(a){return this.button({value:"*",label:"&times;","class":"math-button operation"},a)},a.prototype.division=function(a){return this.button({value:"/",label:"&divide;","class":"math-button operation"},a)},a.prototype.subtraction=function(a){return this.button({value:"-",label:"&ndash;","class":"math-button operation"},a)},a.prototype.equals=function(a){return this.button({value:"=","class":"math-button operation equal"},a)},a.prototype.clear=function(a){return this.button({value:"clear","class":"math-button other clear"},a)},a.prototype.del=function(a){return this.button({value:"del","class":"math-button other del"},a)},a.prototype.square=function(a){return this.button({value:"square",label:""+b("x")+"<sup>2</sup>","class":"math-button other square"},a)},a.prototype.exponent=function(a){var c,d;return c=a.base||b("x"),d=a.power||b("y"),this.button({value:"exponent",label:""+c+"<sup>"+d+"</sup>","class":"math-button other exponent"},a)},a.prototype.root=function(a){var c,d;return c=a.degree?"<div class='degree'>"+a.degree+"</div>":"",d=a.radicand?"<div class='radicand'>"+a.radicand+"</div>":"<div class='radicand'>"+b("x")+"</div>",this.button({value:"root",label:""+c+"\n"+d+"\n<div class='radix'>&radic;</div>\n<div class='vinculum'>&#8212;</div>","class":"math-button other root"},a)},a.prototype.fraction=function(a){return this.button({value:"fraction",label:"<div class='numerator'>a</div>\n<div class='vinculum'>&#8212;</div>\n<div class='denominator'>b</div>","class":"math-button other fraction"},a)},a.prototype.lparen=function(a){return this.button({value:"(","class":"math-button parentheses other"},a)},a.prototype.rparen=function(a){return this.button({value:")","class":"math-button parentheses other"},a)},a.prototype.pi=function(a){return this.button({value:"pi",label:"&pi;","class":"math-button pi other"},a)},a.prototype.variables=function(a){var b,c;return c=function(){var c,d,e,f,g=this;for(e=a.variables,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(function(b){return g.button({value:""+b.name,"class":"math-button variable other",variable:b},a)}(b));return f}.call(this)},a.prototype.fn=function(a){var b;return b=a.name?"function["+a.name+"]":"function",this.button({value:b,label:"&fnof;","class":"math-button other function"},a)},a.prototype.button=function(a,b){return this.ui_elements.button_builder.build(_.extend({},a,this.opts,b||{}))},a}(),c.widgets.ButtonBuilder=c.class_mixer(a)}).call(this)},{}],4:[function(){(function(){var a,b,c,d;d=thinkthroughmath,a=function(){function a(){}return a.prototype.initialize=function(a){this.opts=null!=a?a:{}},a.prototype.render=function(a){var b;return null==a&&(a={}),a=_.extend({},this.opts,a),b=$("<button class='"+a["class"]+"' value='"+a.value+"'>"+(a.label||a.value)+"</button>"),b.on("click",function(){return a.click&&a.click(a)}),a.element.append(b)},a}(),d.class_mixer(a),b=function(){function a(){}return a.prototype.initialize=function(a){this.opts=null!=a?a:{}},a.prototype.render=function(a){return null==a&&(a={}),a=_.extend({},this.opts,a),this.figure=$("<figure class='math-display "+a["class"]+"'>"+(a["default"]||"0")+"</figure>"),a.element.append(this.figure),this.figure},a.prototype.update=function(a){return this.figure.html(a)},a}(),d.class_mixer(b),c=function(){function c(){}return c.prototype.button_builder=a,c.prototype.math_display_builder=b,c}(),d.widgets.UIElements=d.class_mixer(c)}).call(this)},{}]},{},[1,2,3,4]);